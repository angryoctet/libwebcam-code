libwebcam Webcam Library
========================

Introduction
------------

The Webcam Library libwebcam is designed to simplify the development of webcam
applications, primarily on Linux but with an option to be ported to other
platforms, in particular Solaris. It realizes part of what the unwritten
Video4Linux user space library was always supposed to be: an easy to use
library that shields its users from many of the difficulties and problems of
using the V4L2 API directly.

Today libwebcam provides the following core features:

* Enumeration of all cameras available in the system.
* Provide detailed information about the detected devices and their controls.
* Wrapper for the V4L2 frame format enumeration.
* Convenient access to device controls.
* Support for configuring the Linux UVC driver's dynamic controls (extension
  unit controls).

In addition, the interface is prepared to handle device events ranging from
newly detected cameras over control value changes to device button events.
It is easy to add new features without breaking application compatibility and
the addition of new controls or events is straightforward.


Versions
--------

Note that the latest version of the Webcam Library and its API documentation
can always be found at the following address:

QuickCam Team
  http://www.quickcamteam.net/

Change log:

0.1.1:
- Added support the V4L2_CTRL_FLAG_READ_ONLY flag.
- Added per handle tracking of the last system error and a new c_get_handle_error_text function that allows a handle's last system error to be retrieved in certain cases (C_V4L2_ERROR).
- Added a test to check whether the driver supports dynamic controls or not. This should prevent some confusing error 22 messages when "uvcdynctrl -i" is used with an old driver.
- Process meta information and constants only while parsing the XML document for the first time (during the first device).
- Implemented support for processing statistics.
- Added some informational messages, e.g. about skipped devices.
- Added a define to suppress EEXIST errors for all but the first device.
- Improved the way the device is picked. Instead of just taking the first device, all devices are now looped through and supported UVC devices get their controls and mappings added. This is not quite necessary at the moment because the UVC driver still has global controls but that may change in the future.
- Fix: Bogus warning messages related to the V4L2 control types 'Button' and 'Integer64'. Support for these types in libwebcam is still missing, though.
- Fix: Device enumeration issue with V4L1 devices present in the system.
- Fix: Reorganizations in the control enumeration code and inclusion of a workaround for some dangerous behavior in the bttv driver. (Thanks to Bruno Grasland for his bttv testing!)
- Fix: Problem in c_enum_frame_intervals if a non-discrete frame size was passed. The function now returns C_INVALID_ARG in this case.
- Fix: A segfault would occur in c_enum_pixel_formats with unknown pixel formats (i.e. pixel formats without hardcoded MIME type).

0.1: Initial release


Building
--------

External dependencies:
- uvcvideo (Linux UVC driver)
- libxml2
- gengetopt

Important note on the uvcvideo and gengetopt dependencies:

The configure script does not currently check for the existence of gengetopt.
Make sure you install it before running 'make', otherwise your build will fail.
This may be fixed in a future release.

Unless the USE_UVCVIDEO constant is disabled (it is enabled by default),
libwebcam needs two header files from the Linux UVC driver. If you don't
already have them on your hard disk, you can download them from the uvcvideo
project's home page at http://linux-uvc.berlios.de/ or directly from the
Subversion repository at:
http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk/

You must copy or link uvcvideo.h and uvc_compat.h into the /Common/include/
directory, e.g. using the following commands:

cd Common/include/
ln -s ~/uvcvideo/trunk/uvcvideo.h
ln -s ~/uvcvideo/trunk/uvc_compat.h

or

cd Common/include/
wget http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk/uvcvideo.h
wget http://svn.berlios.de/svnroot/repos/linux-uvc/linux-uvc/trunk/uvc_compat.h

Once you have those two files you can continue as normal.

The build system is based on CMake. Because of the way CMake works, Makefiles
do not ship with libwebcam, so you have to have CMake installed. Don't worry,
though, you are likely to have a lot less illegible error messages than with
the previous GNU Automake.

Once you have CMake installed you can build and install it by running the
following commands in the libwebcam source directory:

mkdir build
cd build
cmake ..
make


Questions and feedback
----------------------

There is a forum for developers and users of the Webcam Library. Please feel
free to post your questions and comments:

QuickCam Team discussion forums
  http://forums.quickcamteam.net/forumdisplay.php


Copyright and license
---------------------

Copyright (c) 2006-2008 Logitech.

libwebcam is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

libwebcam is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with libwebcam.  If not, see <http://www.gnu.org/licenses/>.

